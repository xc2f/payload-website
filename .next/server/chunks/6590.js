"use strict";exports.id=6590,exports.ids=[6590],exports.modules={48397:a=>{a.exports={rE:"3.958.0"}},56590:(a,b,c)=>{c.d(b,{getDefaultRoleAssumer:()=>b$,getDefaultRoleAssumerWithWebIdentity:()=>b_});var d=c(89701),e=c(59476),f=c(54057);let g={silence:!1};var h=c(33718),i=c(82459);let j={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};var k=c(33078),l=c(37947);class m extends l.T{constructor(a){super(a),Object.setPrototypeOf(this,m.prototype)}}class n extends m{name="ExpiredTokenException";$fault="client";constructor(a){super({name:"ExpiredTokenException",$fault:"client",...a}),Object.setPrototypeOf(this,n.prototype)}}class o extends m{name="MalformedPolicyDocumentException";$fault="client";constructor(a){super({name:"MalformedPolicyDocumentException",$fault:"client",...a}),Object.setPrototypeOf(this,o.prototype)}}class p extends m{name="PackedPolicyTooLargeException";$fault="client";constructor(a){super({name:"PackedPolicyTooLargeException",$fault:"client",...a}),Object.setPrototypeOf(this,p.prototype)}}class q extends m{name="RegionDisabledException";$fault="client";constructor(a){super({name:"RegionDisabledException",$fault:"client",...a}),Object.setPrototypeOf(this,q.prototype)}}class r extends m{name="IDPRejectedClaimException";$fault="client";constructor(a){super({name:"IDPRejectedClaimException",$fault:"client",...a}),Object.setPrototypeOf(this,r.prototype)}}class s extends m{name="InvalidIdentityTokenException";$fault="client";constructor(a){super({name:"InvalidIdentityTokenException",$fault:"client",...a}),Object.setPrototypeOf(this,s.prototype)}}class t extends m{name="IDPCommunicationErrorException";$fault="client";constructor(a){super({name:"IDPCommunicationErrorException",$fault:"client",...a}),Object.setPrototypeOf(this,t.prototype)}}let u="AssumedRoleUser",v="Credentials",w="DurationSeconds",x="Policy",y="PolicyArns",z="PackedPolicySize",A="RoleArn",B="RoleSessionName",C="SourceIdentity",D="awsQueryError",E="client",F="error",G="httpError",H="message",I="smithy.ts.sdk.synthetic.com.amazonaws.sts",J="com.amazonaws.sts";var K=[0,J,"accessKeySecretType",8,0],L=[0,J,"clientTokenType",8,0],M=[3,J,u,0,["AssumedRoleId","Arn"],[0,0]],N=[3,J,"AssumeRoleRequest",0,[A,B,y,x,w,"Tags","TransitiveTagKeys","ExternalId","SerialNumber","TokenCode",C,"ProvidedContexts"],[0,0,()=>ab,0,1,()=>ad,64,0,0,0,0,()=>ac]],O=[3,J,"AssumeRoleResponse",0,[v,u,z,C],[[()=>R,0],()=>M,1,0]],P=[3,J,"AssumeRoleWithWebIdentityRequest",0,[A,B,"WebIdentityToken","ProviderId",y,x,w],[0,0,[()=>L,0],0,()=>ab,0,1]],Q=[3,J,"AssumeRoleWithWebIdentityResponse",0,[v,"SubjectFromWebIdentityToken",u,z,"Provider","Audience",C],[[()=>R,0],0,()=>M,1,0,0,0]],R=[3,J,v,0,["AccessKeyId","SecretAccessKey","SessionToken","Expiration"],[0,[()=>K,0],0,4]],S=[-3,J,"ExpiredTokenException",{[D]:["ExpiredTokenException",400],[F]:E,[G]:400},[H],[0]];k.O.for(J).registerError(S,n);var T=[-3,J,"IDPCommunicationErrorException",{[D]:["IDPCommunicationError",400],[F]:E,[G]:400},[H],[0]];k.O.for(J).registerError(T,t);var U=[-3,J,"IDPRejectedClaimException",{[D]:["IDPRejectedClaim",403],[F]:E,[G]:403},[H],[0]];k.O.for(J).registerError(U,r);var V=[-3,J,"InvalidIdentityTokenException",{[D]:["InvalidIdentityToken",400],[F]:E,[G]:400},[H],[0]];k.O.for(J).registerError(V,s);var W=[-3,J,"MalformedPolicyDocumentException",{[D]:["MalformedPolicyDocument",400],[F]:E,[G]:400},[H],[0]];k.O.for(J).registerError(W,o);var X=[-3,J,"PackedPolicyTooLargeException",{[D]:["PackedPolicyTooLarge",400],[F]:E,[G]:400},[H],[0]];k.O.for(J).registerError(X,p);var Y=[3,J,"PolicyDescriptorType",0,["arn"],[0]],Z=[3,J,"ProvidedContext",0,["ProviderArn","ContextAssertion"],[0,0]],$=[-3,J,"RegionDisabledException",{[D]:["RegionDisabledException",403],[F]:E,[G]:403},[H],[0]];k.O.for(J).registerError($,q);var _=[3,J,"Tag",0,["Key","Value"],[0,0]],aa=[-3,I,"STSServiceException",0,[],[]];k.O.for(I).registerError(aa,m);var ab=[1,J,"policyDescriptorListType",0,()=>Y],ac=[1,J,"ProvidedContextsListType",0,()=>Z],ad=[1,J,"tagListType",0,()=>_],ae=[9,J,"AssumeRole",0,()=>N,()=>O],af=[9,J,"AssumeRoleWithWebIdentity",0,()=>P,()=>Q];class ag extends i.u.classBuilder().ep(j).m(function(a,b,c,d){return[(0,h.r)(c,a.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").sc(ae).build(){}class ah extends i.u.classBuilder().ep(j).m(function(a,b,c,d){return[(0,h.r)(c,a.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").sc(af).build(){}let ai=a=>{if("string"==typeof a?.Arn){let b=a.Arn.split(":");if(b.length>4&&""!==b[4])return b[4]}},aj=async(a,b,c,d={})=>{let h="function"==typeof a?await a():a,i="function"==typeof b?await b():b,j="",k=h??i??(j=await (function(a={}){return(0,f.Z)({...e.GG,default:async()=>(g.silence||console.warn("@aws-sdk - WARN - default STS region of us-east-1 used. See @aws-sdk/credential-providers README and set a region explicitly."),"us-east-1")},{...e.zH,...a})})(d)());return c?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${h} (credential provider clientConfig)`,`${i} (contextual client)`,`${j} (STS default: AWS_REGION, profile region, or us-east-1)`),k},ak=a=>a?.metadata?.handlerProtocol==="h2";var al=c(59626),am=c(50284),an=c(5577),ao=c(29351),ap=c(32036),aq=c(53179),ar=c(41717),as=c(15376),at=c(1668),au=c(94970),av=c(30645),aw=c(67420),ax=c(95681),ay=c(98481),az=c(39494),aA=c(93258),aB=c(88392),aC=c(91035);let aD=async(a,b,c)=>({operation:(0,aB.u)(b).operation,region:await (0,aC.t)(a.region)()||(()=>{throw Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),aE=a=>{let b=[];if("AssumeRoleWithWebIdentity"===a.operation)b.push({schemeId:"smithy.api#noAuth"});else b.push({schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:a.region},propertiesExtractor:(a,b)=>({signingProperties:{config:a,context:b}})});return b};var aF=c(48397),aG=c(62033),aH=c(27356),aI=c(13246),aJ=c(61997),aK=c(69022),aL=c(34352),aM=c(98550),aN=c(92308),aO=c(3057),aP=c(24817),aQ=c(99741),aR=c(99162),aS=c(271),aT=c(55947),aU=c(7992),aV=c(62445),aW=c(81140),aX=c(44687),aY=c(42533),aZ=c(20674),a$=c(11181);let a_=new(c(12764)).A({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(a,b)=>""===b.trim()&&b.includes("\n")?"":void 0});a_.addEntity("#xD","\r"),a_.addEntity("#10","\n");var a0=c(91016),a1=c(17553),a2=c(38756),a3=c(22765),a4=c(58220);class a5 extends a3.B{settings;stringDeserializer;constructor(a){super(),this.settings=a,this.stringDeserializer=new a0.k(a)}setSerdeContext(a){this.serdeContext=a,this.stringDeserializer.setSerdeContext(a)}read(a,b,c){let d=aZ.l.of(a),e=d.getMemberSchemas();if(d.isStructSchema()&&d.isMemberSchema()&&Object.values(e).find(a=>!!a.getMemberTraits().eventPayload)){let a={},c=Object.keys(e)[0];return e[c].isBlobSchema()?a[c]=b:a[c]=this.read(e[c],b),a}let f=(this.serdeContext?.utf8Encoder??a2.P)(b),g=this.parseXml(f);return this.readSchema(a,c?g[c]:g)}readSchema(a,b){let c=aZ.l.of(a);if(c.isUnitSchema())return;let d=c.getMergedTraits();if(c.isListSchema()&&!Array.isArray(b))return this.readSchema(c,[b]);if(null==b)return b;if("object"==typeof b){let a=!!d.sparse,e=!!d.xmlFlattened;if(c.isListSchema()){let d=c.getValueSchema(),f=[],g=d.getMergedTraits().xmlName??"member",h=e?b:(b[0]??b)[g];for(let b of Array.isArray(h)?h:[h])(null!=b||a)&&f.push(this.readSchema(d,b));return f}let f={};if(c.isMapSchema()){let d,g=c.getKeySchema(),h=c.getValueSchema();d=e?Array.isArray(b)?b:[b]:Array.isArray(b.entry)?b.entry:[b.entry];let i=g.getMergedTraits().xmlName??"key",j=h.getMergedTraits().xmlName??"value";for(let b of d){let c=b[i],d=b[j];(null!=d||a)&&(f[c]=this.readSchema(h,d))}return f}if(c.isStructSchema()){let a,d=c.isUnionSchema();for(let[e,g]of(d&&(a=new a4.F(b,f)),c.structIterator())){let c=g.getMergedTraits(),h=c.httpPayload?c.xmlName??g.getName():g.getMemberTraits().xmlName??e;d&&a.mark(h),null!=b[h]&&(f[e]=this.readSchema(g,b[h]))}return d&&a.writeUnknown(),f}if(c.isDocumentSchema())return b;throw Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${c.getName(!0)}`)}return c.isListSchema()?[]:c.isMapSchema()||c.isStructSchema()?{}:this.stringDeserializer.read(c,b)}parseXml(a){if(a.length){let b;try{b=a_.parse(a,!0)}catch(b){throw b&&"object"==typeof b&&Object.defineProperty(b,"$responseBodyText",{value:a}),b}let c="#text",d=Object.keys(b)[0],e=b[d];return e[c]&&(e[d]=e[c],delete e[c]),(0,a1.r)(e)}return{}}}var a6=c(75981),a7=c(46360),a8=c(81529),a9=c(67557),ba=c(85983),bb=c(73891),bc=c(687);class bd extends a3.B{settings;buffer;constructor(a){super(),this.settings=a}write(a,b,c=""){void 0===this.buffer&&(this.buffer="");let d=aZ.l.of(a);if(c&&!c.endsWith(".")&&(c+="."),d.isBlobSchema())("string"==typeof b||b instanceof Uint8Array)&&(this.writeKey(c),this.writeValue((this.serdeContext?.base64Encoder??bb.n)(b)));else if(d.isBooleanSchema()||d.isNumericSchema()||d.isStringSchema())null!=b?(this.writeKey(c),this.writeValue(String(b))):d.isIdempotencyToken()&&(this.writeKey(c),this.writeValue((0,a8.v4)()));else if(d.isBigIntegerSchema())null!=b&&(this.writeKey(c),this.writeValue(String(b)));else if(d.isBigDecimalSchema())null!=b&&(this.writeKey(c),this.writeValue(b instanceof a9.D?b.string:String(b)));else if(d.isTimestampSchema()){if(b instanceof Date)switch(this.writeKey(c),(0,a6.V)(d,this.settings)){case 5:this.writeValue(b.toISOString().replace(".000Z","Z"));break;case 6:this.writeValue((0,ba.JV)(b));break;case 7:this.writeValue(String(b.getTime()/1e3))}}else if(d.isDocumentSchema())Array.isArray(b)?this.write(79,b,c):b instanceof Date?this.write(4,b,c):b instanceof Uint8Array?this.write(21,b,c):b&&"object"==typeof b?this.write(143,b,c):(this.writeKey(c),this.writeValue(String(b)));else if(d.isListSchema()){if(Array.isArray(b))if(0===b.length)this.settings.serializeEmptyLists&&(this.writeKey(c),this.writeValue(""));else{let a=d.getValueSchema(),e=this.settings.flattenLists||d.getMergedTraits().xmlFlattened,f=1;for(let d of b){if(null==d)continue;let b=this.getKey("member",a.getMergedTraits().xmlName),g=e?`${c}${f}`:`${c}${b}.${f}`;this.write(a,d,g),++f}}}else if(d.isMapSchema()){if(b&&"object"==typeof b){let a=d.getKeySchema(),e=d.getValueSchema(),f=d.getMergedTraits().xmlFlattened,g=1;for(let[d,h]of Object.entries(b)){if(null==h)continue;let b=this.getKey("key",a.getMergedTraits().xmlName),i=f?`${c}${g}.${b}`:`${c}entry.${g}.${b}`,j=this.getKey("value",e.getMergedTraits().xmlName),k=f?`${c}${g}.${j}`:`${c}entry.${g}.${j}`;this.write(a,d,i),this.write(e,h,k),++g}}}else if(d.isStructSchema()){if(b&&"object"==typeof b){let a=!1;for(let[e,f]of(0,bc.R)(d,b)){if(null==b[e]&&!f.isIdempotencyToken())continue;let d=this.getKey(e,f.getMergedTraits().xmlName),g=`${c}${d}`;this.write(f,b[e],g),a=!0}if(!a&&d.isUnionSchema()){let{$unknown:a}=b;if(Array.isArray(a)){let[b,d]=a,e=`${c}${b}`;this.write(15,d,e)}}}}else if(d.isUnitSchema());else throw Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${d.getName(!0)}`)}flush(){if(void 0===this.buffer)throw Error("@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.");let a=this.buffer;return delete this.buffer,a}getKey(a,b){let c=b??a;return this.settings.capitalizeKeys?c[0].toUpperCase()+c.slice(1):c}writeKey(a){a.endsWith(".")&&(a=a.slice(0,a.length-1)),this.buffer+=`&${(0,a7.$)(a)}=`}writeValue(a){this.buffer+=(0,a7.$)(a)}}class be extends aW.M{options;serializer;deserializer;mixin=new a$.U;constructor(a){super({defaultNamespace:a.defaultNamespace}),this.options=a;let b={timestampFormat:{useTrait:!0,default:5},httpBindings:!1,xmlNamespace:a.xmlNamespace,serviceNamespace:a.defaultNamespace,serializeEmptyLists:!0};this.serializer=new bd(b),this.deserializer=new a5(b)}getShapeId(){return"aws.protocols#awsQuery"}setSerdeContext(a){this.serializer.setSerdeContext(a),this.deserializer.setSerdeContext(a)}getPayloadCodec(){throw Error("AWSQuery protocol has no payload codec.")}async serializeRequest(a,b,c){let d=await super.serializeRequest(a,b,c);d.path.endsWith("/")||(d.path+="/"),Object.assign(d.headers,{"content-type":"application/x-www-form-urlencoded"}),"unit"!==(0,aY.L)(a.input)&&d.body||(d.body="");let e=a.name.split("#")[1]??a.name;return d.body=`Action=${e}&Version=${this.options.version}`+d.body,d.body.endsWith("&")&&(d.body=d.body.slice(-1)),d}async deserializeResponse(a,b,c){let d=this.deserializer,e=aZ.l.of(a.output),f={};if(c.statusCode>=300){let e=await (0,aX.P)(c.body,b);e.byteLength>0&&Object.assign(f,await d.read(15,e)),await this.handleError(a,b,c,f,this.deserializeMetadata(c))}for(let a in c.headers){let b=c.headers[a];delete c.headers[a],c.headers[a.toLowerCase()]=b}let g=a.name.split("#")[1]??a.name,h=e.isStructSchema()&&this.useNestedResult()?g+"Result":void 0,i=await (0,aX.P)(c.body,b);return i.byteLength>0&&Object.assign(f,await d.read(e,i,h)),{$metadata:this.deserializeMetadata(c),...f}}useNestedResult(){return!0}async handleError(a,b,c,d,e){let f=this.loadQueryErrorCode(c,d)??"Unknown",g=this.loadQueryError(d),h=this.loadQueryErrorMessage(d);g.message=h,g.Error={Type:g.Type,Code:g.Code,Message:h};let{errorSchema:i,errorMetadata:j}=await this.mixin.getErrorSchemaOrThrowBaseException(f,this.options.defaultNamespace,c,g,e,this.mixin.findQueryCompatibleError),l=aZ.l.of(i),m=new(k.O.for(i[1]).getErrorCtor(i)??Error)(h),n={Type:g.Error.Type,Code:g.Error.Code,Error:g.Error};for(let[a,b]of l.structIterator()){let c=b.getMergedTraits().xmlName??a,e=g[c]??d[c];n[a]=this.deserializer.readSchema(b,e)}throw this.mixin.decorateServiceException(Object.assign(m,j,{$fault:l.getMergedTraits().error,message:h},n),d)}loadQueryErrorCode(a,b){let c=(b.Errors?.[0]?.Error??b.Errors?.Error??b.Error)?.Code;return void 0!==c?c:404==a.statusCode?"NotFound":void 0}loadQueryError(a){return a.Errors?.[0]?.Error??a.Errors?.Error??a.Error}loadQueryErrorMessage(a){let b=this.loadQueryError(a);return b?.message??b?.Message??a.message??a.Message??"Unknown"}getDefaultContentType(){return"application/x-www-form-urlencoded"}}var bf=c(97885),bg=c(97059),bh=c(46734),bi=c(38353),bj=c(31589),bk=c(8270),bl=c(70458),bm=c(69327);let bn="required",bo="type",bp="argv",bq="booleanEquals",br="stringEquals",bs="sigv4",bt="us-east-1",bu="endpoint",bv="https://sts.{Region}.{PartitionResult#dnsSuffix}",bw="tree",bx="error",by="getAttr",bz={[bn]:!1,[bo]:"string"},bA={[bn]:!0,default:!1,[bo]:"boolean"},bB={ref:"Endpoint"},bC={fn:"isSet",[bp]:[{ref:"Region"}]},bD={ref:"Region"},bE={fn:"aws.partition",[bp]:[bD],assign:"PartitionResult"},bF={ref:"UseFIPS"},bG={ref:"UseDualStack"},bH={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:bs,signingName:"sts",signingRegion:bt}]},headers:{}},bI={},bJ={conditions:[{fn:br,[bp]:[bD,"aws-global"]}],[bu]:bH,[bo]:bu},bK={fn:bq,[bp]:[bF,!0]},bL={fn:bq,[bp]:[bG,!0]},bM={fn:by,[bp]:[{ref:"PartitionResult"},"supportsFIPS"]},bN={ref:"PartitionResult"},bO={fn:bq,[bp]:[!0,{fn:by,[bp]:[bN,"supportsDualStack"]}]},bP=[{fn:"isSet",[bp]:[bB]}],bQ=[bK],bR=[bL],bS={version:"1.0",parameters:{Region:bz,UseDualStack:bA,UseFIPS:bA,Endpoint:bz,UseGlobalEndpoint:bA},rules:[{conditions:[{fn:bq,[bp]:[{ref:"UseGlobalEndpoint"},!0]},{fn:"not",[bp]:bP},bC,bE,{fn:bq,[bp]:[bF,!1]},{fn:bq,[bp]:[bG,!1]}],rules:[{conditions:[{fn:br,[bp]:[bD,"ap-northeast-1"]}],endpoint:bH,[bo]:bu},{conditions:[{fn:br,[bp]:[bD,"ap-south-1"]}],endpoint:bH,[bo]:bu},{conditions:[{fn:br,[bp]:[bD,"ap-southeast-1"]}],endpoint:bH,[bo]:bu},{conditions:[{fn:br,[bp]:[bD,"ap-southeast-2"]}],endpoint:bH,[bo]:bu},bJ,{conditions:[{fn:br,[bp]:[bD,"ca-central-1"]}],endpoint:bH,[bo]:bu},{conditions:[{fn:br,[bp]:[bD,"eu-central-1"]}],endpoint:bH,[bo]:bu},{conditions:[{fn:br,[bp]:[bD,"eu-north-1"]}],endpoint:bH,[bo]:bu},{conditions:[{fn:br,[bp]:[bD,"eu-west-1"]}],endpoint:bH,[bo]:bu},{conditions:[{fn:br,[bp]:[bD,"eu-west-2"]}],endpoint:bH,[bo]:bu},{conditions:[{fn:br,[bp]:[bD,"eu-west-3"]}],endpoint:bH,[bo]:bu},{conditions:[{fn:br,[bp]:[bD,"sa-east-1"]}],endpoint:bH,[bo]:bu},{conditions:[{fn:br,[bp]:[bD,bt]}],endpoint:bH,[bo]:bu},{conditions:[{fn:br,[bp]:[bD,"us-east-2"]}],endpoint:bH,[bo]:bu},{conditions:[{fn:br,[bp]:[bD,"us-west-1"]}],endpoint:bH,[bo]:bu},{conditions:[{fn:br,[bp]:[bD,"us-west-2"]}],endpoint:bH,[bo]:bu},{endpoint:{url:bv,properties:{authSchemes:[{name:bs,signingName:"sts",signingRegion:"{Region}"}]},headers:bI},[bo]:bu}],[bo]:bw},{conditions:bP,rules:[{conditions:bQ,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[bo]:bx},{conditions:bR,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[bo]:bx},{endpoint:{url:bB,properties:bI,headers:bI},[bo]:bu}],[bo]:bw},{conditions:[bC],rules:[{conditions:[bE],rules:[{conditions:[bK,bL],rules:[{conditions:[{fn:bq,[bp]:[!0,bM]},bO],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:bI,headers:bI},[bo]:bu}],[bo]:bw},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[bo]:bx}],[bo]:bw},{conditions:bQ,rules:[{conditions:[{fn:bq,[bp]:[bM,!0]}],rules:[{conditions:[{fn:br,[bp]:[{fn:by,[bp]:[bN,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:bI,headers:bI},[bo]:bu},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:bI,headers:bI},[bo]:bu}],[bo]:bw},{error:"FIPS is enabled but this partition does not support FIPS",[bo]:bx}],[bo]:bw},{conditions:bR,rules:[{conditions:[bO],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:bI,headers:bI},[bo]:bu}],[bo]:bw},{error:"DualStack is enabled but this partition does not support DualStack",[bo]:bx}],[bo]:bw},bJ,{endpoint:{url:bv,properties:bI,headers:bI},[bo]:bu}],[bo]:bw}],[bo]:bw},{error:"Invalid Configuration: Missing Region",[bo]:bx}]},bT=new bk.k({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),bU=(a,b={})=>bT.get(a,()=>(0,bl.s)(bS,{endpointParams:a,logger:b.logger}));bm.m.aws=bj.UF;var bV=c(40267),bW=c(10931),bX=c(99443);class bY extends az.K{config;constructor(...[a]){let b=(a=>{(0,aR.I)(process.version);let b=(0,aU.I)(a),c=()=>b().then(aS.l),d=(a=>({apiVersion:"2011-06-15",base64Decoder:a?.base64Decoder??bh.E,base64Encoder:a?.base64Encoder??bb.n,disableHostPrefix:a?.disableHostPrefix??!1,endpointProvider:a?.endpointProvider??bU,extensions:a?.extensions??[],httpAuthSchemeProvider:a?.httpAuthSchemeProvider??aE,httpAuthSchemes:a?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:a=>a.getIdentityProvider("aws.auth#sigv4"),signer:new aI.f2},{schemeId:"smithy.api#noAuth",identityProvider:a=>a.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new aN.m}],logger:a?.logger??new bf.N,protocol:a?.protocol??be,protocolSettings:a?.protocolSettings??{defaultNamespace:"com.amazonaws.sts",xmlNamespace:"https://sts.amazonaws.com/doc/2011-06-15/",version:"2011-06-15",serviceTarget:"AWSSecurityTokenServiceV20110615"},serviceId:a?.serviceId??"STS",urlParser:a?.urlParser??bg.parseUrl,utf8Decoder:a?.utf8Decoder??bi.a,utf8Encoder:a?.utf8Encoder??a2.P}))(a);(0,aG.I)(process.version);let g={profile:a?.profile,logger:d.logger};return{...d,...a,runtime:"node",defaultsMode:b,authSchemePreference:a?.authSchemePreference??(0,f.Z)(aH.$,g),bodyLengthChecker:a?.bodyLengthChecker??aT.n,defaultUserAgentProvider:a?.defaultUserAgentProvider??(0,aJ.pf)({serviceId:d.serviceId,clientVersion:aF.rE}),httpAuthSchemes:a?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:b=>b.getIdentityProvider("aws.auth#sigv4")||(async b=>await a.credentialDefaultProvider(b?.__config||{})()),signer:new aI.f2},{schemeId:"smithy.api#noAuth",identityProvider:a=>a.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new aN.m}],maxAttempts:a?.maxAttempts??(0,f.Z)(ax.qs,a),region:a?.region??(0,f.Z)(e.GG,{...e.zH,...g}),requestHandler:aP.$.create(a?.requestHandler??c),retryMode:a?.retryMode??(0,f.Z)({...ax.kN,default:async()=>(await c()).retryMode||aV.L0},a),sha256:a?.sha256??aO.V.bind(null,"sha256"),streamCollector:a?.streamCollector??aQ.k,useDualstackEndpoint:a?.useDualstackEndpoint??(0,f.Z)(aL.e$,g),useFipsEndpoint:a?.useFipsEndpoint??(0,f.Z)(aM.Ko,g),userAgentAppId:a?.userAgentAppId??(0,f.Z)(aK.hV,g)}})(a||{});super(b),this.initConfig=b;let c=(a=>Object.assign(a,{useDualstackEndpoint:a.useDualstackEndpoint??!1,useFipsEndpoint:a.useFipsEndpoint??!1,useGlobalEndpoint:a.useGlobalEndpoint??!1,defaultSigningName:"sts"}))(b),d=(0,ao.D)(c),g=(0,ax.$z)(d),h=(0,aq.T)(g),i=(0,al.OV)(h),j=((a,b)=>{let c=Object.assign((0,bV.R)(a),(0,bX.xA)(a),(0,bW.e)(a),(a=>{let b=a.httpAuthSchemes,c=a.httpAuthSchemeProvider,d=a.credentials;return{setHttpAuthScheme(a){let c=b.findIndex(b=>b.schemeId===a.schemeId);-1===c?b.push(a):b.splice(c,1,a)},httpAuthSchemes:()=>b,setHttpAuthSchemeProvider(a){c=a},httpAuthSchemeProvider:()=>c,setCredentials(a){d=a},credentials:()=>d}})(a));return b.forEach(a=>a.configure(c)),Object.assign(a,(0,bV.$)(c),(0,bX.uv)(c),(0,bW.j)(c),(a=>({httpAuthSchemes:a.httpAuthSchemes(),httpAuthSchemeProvider:a.httpAuthSchemeProvider(),credentials:a.credentials()}))(c))})((a=>{let b=Object.assign(a,{stsClientCtor:bY});return Object.assign((0,aA.h)(b),{authSchemePreference:(0,aC.t)(a.authSchemePreference??[])})})((0,aw.C)(i)),a?.extensions||[]);this.config=j,this.middlewareStack.use((0,au.wq)(this.config)),this.middlewareStack.use((0,ap.sM)(this.config)),this.middlewareStack.use((0,ay.ey)(this.config)),this.middlewareStack.use((0,av.vK)(this.config)),this.middlewareStack.use((0,al.TC)(this.config)),this.middlewareStack.use((0,am.Y7)(this.config)),this.middlewareStack.use((0,an.n)(this.config)),this.middlewareStack.use((0,ar.w)(this.config,{httpAuthSchemeParametersProvider:aD,identityProviderConfigProvider:async a=>new as.h({"aws.auth#sigv4":a.credentials})})),this.middlewareStack.use((0,at.l)(this.config))}destroy(){super.destroy()}}let bZ=(a,b)=>b?class extends a{constructor(a){for(let c of(super(a),b))this.middlewareStack.use(c)}}:a,b$=(a={},b)=>((a,b)=>{let c,e;return async(f,g)=>{if(e=f,!c){let{logger:d=a?.parentClientConfig?.logger,profile:f=a?.parentClientConfig?.profile,region:g,requestHandler:h=a?.parentClientConfig?.requestHandler,credentialProviderLogger:i,userAgentAppId:j=a?.parentClientConfig?.userAgentAppId}=a,k=await aj(g,a?.parentClientConfig?.region,i,{logger:d,profile:f}),l=!ak(h);c=new b({...a,userAgentAppId:j,profile:f,credentialDefaultProvider:()=>async()=>e,region:k,requestHandler:l?h:void 0,logger:d})}let{Credentials:h,AssumedRoleUser:i}=await c.send(new ag(g));if(!h||!h.AccessKeyId||!h.SecretAccessKey)throw Error(`Invalid response from STS.assumeRole call with role ${g.RoleArn}`);let j=ai(i),k={accessKeyId:h.AccessKeyId,secretAccessKey:h.SecretAccessKey,sessionToken:h.SessionToken,expiration:h.Expiration,...h.CredentialScope&&{credentialScope:h.CredentialScope},...j&&{accountId:j}};return(0,d.g)(k,"CREDENTIALS_STS_ASSUME_ROLE","i"),k}})(a,bZ(bY,b)),b_=(a={},b)=>((a,b)=>{let c;return async e=>{if(!c){let{logger:d=a?.parentClientConfig?.logger,profile:e=a?.parentClientConfig?.profile,region:f,requestHandler:g=a?.parentClientConfig?.requestHandler,credentialProviderLogger:h,userAgentAppId:i=a?.parentClientConfig?.userAgentAppId}=a,j=await aj(f,a?.parentClientConfig?.region,h,{logger:d,profile:e}),k=!ak(g);c=new b({...a,userAgentAppId:i,profile:e,region:j,requestHandler:k?g:void 0,logger:d})}let{Credentials:f,AssumedRoleUser:g}=await c.send(new ah(e));if(!f||!f.AccessKeyId||!f.SecretAccessKey)throw Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${e.RoleArn}`);let h=ai(g),i={accessKeyId:f.AccessKeyId,secretAccessKey:f.SecretAccessKey,sessionToken:f.SessionToken,expiration:f.Expiration,...f.CredentialScope&&{credentialScope:f.CredentialScope},...h&&{accountId:h}};return h&&(0,d.g)(i,"RESOLVED_ACCOUNT_ID","T"),(0,d.g)(i,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),i}})(a,bZ(bY,b))}};