"use strict";exports.id=5352,exports.ids=[5352],exports.modules={75352:(a,b,c)=>{c.r(b),c.d(b,{fromTokenFile:()=>j,fromWebToken:()=>h});var d=c(89701),e=c(64262),f=c(22784),g=c(29021);let h=a=>async b=>{a.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");let{roleArn:d,roleSessionName:e,webIdentityToken:f,providerId:g,policyArns:h,policy:i,durationSeconds:j}=a,{roleAssumerWithWebIdentity:k}=a;if(!k){let{getDefaultRoleAssumerWithWebIdentity:d}=await c.e(6590).then(c.bind(c,56590));k=d({...a.clientConfig,credentialProviderLogger:a.logger,parentClientConfig:{...b?.callerClientConfig,...a.parentClientConfig}},a.clientPlugins)}return k({RoleArn:d,RoleSessionName:e??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:f,ProviderId:g,PolicyArns:h,Policy:i,DurationSeconds:j})},i="AWS_WEB_IDENTITY_TOKEN_FILE",j=(a={})=>async b=>{a.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");let c=a?.webIdentityTokenFile??process.env[i],j=a?.roleArn??process.env.AWS_ROLE_ARN,k=a?.roleSessionName??process.env.AWS_ROLE_SESSION_NAME;if(!c||!j)throw new e.C("Web identity configuration not specified",{logger:a.logger});let l=await h({...a,webIdentityToken:f.Z?.getTokenRecord?.()[c]??(0,g.readFileSync)(c,{encoding:"ascii"}),roleArn:j,roleSessionName:k})(b);return c===process.env[i]&&(0,d.g)(l,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h"),l}}};